# name the compiler
CPP = wpp386
CC = wcc386
WL = wlib
ASM = JWasm

OBJETS1 =	AFFSTR.OBJ	CLIP.OBJ	FONT.OBJ	GPRINTF.OBJ	&
		DIRTYBOX.OBJ	LOGPHYS.OBJ	RECT.OBJ	PLOT.OBJ	&
		SCALEBOX.OBJ	SCALESPT.OBJ	SCALESPI.OBJ			&
		COPYBOX.OBJ	COPYBOXI.OBJ	COPYBOXF.OBJ	COPYBOXM.OBJ	&
		BLITBOX.OBJ	BLITBOXI.OBJ	BLITBOXF.OBJ	BLITBOXM.OBJ	&
		CLRBOX.OBJ	CLRBOXI.OBJ	CLRBOXF.OBJ	CLRBOXM.OBJ	&
		CALCMASK.OBJ	MASK.OBJ	COPYMASK.OBJ	GRAPH.OBJ	&
		CPYBLOCK.OBJ	CPYBLOCI.OBJ	SAVBLOCK.OBJ	RESBLOCK.OBJ	&
		BOX.OBJ		MOUSEDAT.OBJ	INIMOUSE.OBJ			&
		SCREENXY.OBJ	SHADE.OBJ	INITMODE.OBJ


!ifeq BT NT
CFLAGS	= /D_WIN32 /fh=NT.PCH
# /DINITGUID
AFLAGS	= /D_WIN32
LIB     = NT_SVGS
OBJETS2 =	MOUSEWIN.OBJ	DDRAW.OBJ	PAL.OBJ
!else
CFLAGS	= /D_DOS4GW /fh=DOS.PCH
AFLAGS	= /D_DOS4GW
LIB     = DOS_SVGS
OBJETS2 =	VESA.OBJ	MOUSEDOS.OBJ					&
		COPYBOV.OBJ	COPYBOVI.OBJ	COPYBOVF.OBJ	COPYBOVM.OBJ	&
		BLITBOV.OBJ	BLITBOVI.OBJ	BLITBOVF.OBJ	BLITBOVM.OBJ	&
		CLEABOV.OBJ	CLEABOVI.OBJ	CLEABOVF.OBJ	CLEABOVM.OBJ
!endif

CFLAGS += /6s /d3 /od /s /wx /mf /hd /DLIB_LOCAL /bt=$(BT) /zp1 /v
LFLAGS  = /c /b /l
AFLAGS += /DSTACK_CALL /nologo /Cx /c /WX /Zd /omf /Zp1 /Fl /Fd

#.SILENT

$(LIB).LIB: $(OBJETS1) $(OBJETS2)
	*$(WL) $(LFLAGS) $(LIB) $?

.cpp.obj:
	$(CPP) $* $(CFLAGS)

.c.obj:
	$(CC) $* $(CFLAGS)

.asm.obj:
	$(ASM) $(AFLAGS) $*.ASM
